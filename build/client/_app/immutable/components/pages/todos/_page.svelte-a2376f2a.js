import{P as K,S as ut,i as dt,s as ft,k as y,a as N,q as ht,Q as pt,l as E,h as k,c as U,m as P,r as _t,n,B as d,b as x,R as W,T as mt,d as vt,f as gt,t as bt,M as nt,U as yt,V as Et,W as wt,X as Tt,Y as ot,Z as kt,g as Mt,_ as Ot,C as Nt}from"../../../chunks/index-b85cc859.js";import{c as S}from"../../../chunks/singletons-98523912.js";S.disable_scroll_handling;S.goto;S.invalidate;const it=S.invalidateAll;S.prefetch;S.prefetch_routes;S.before_navigate;S.after_navigate;const Ut=S.apply_action;function X(f,t=()=>{}){const a=async({element:v,form:_,result:s})=>{var p;s.type==="success"&&await it();const r=(p=v.formAction)!=null?p:_.action;location.origin+location.pathname===r.split("?")[0]&&Ut(s)},e=f instanceof HTMLFormElement?f:f.form;if(!e)throw new Error("Element is not associated with a form");async function c(v){var b,T;v.preventDefault();const _=(b=f.formAction)!=null?b:e.action,s=new FormData(e);let r=!1;const o=(T=t({element:f,data:s,cancel:()=>r=!0,form:e}))!=null?T:a;if(r)return;let g;try{g=await(await fetch(_,{method:"POST",headers:{accept:"application/json"},body:s})).json()}catch(h){g={type:"error",error:h}}o({element:f,data:s,form:e,result:g,get type(){throw new Error("(result) => {...} has changed to ({ result }) => {...}")},get location(){throw new Error("(result) => {...} has changed to ({ result }) => {...}")},get error(){throw new Error("(result) => {...} has changed to ({ result }) => {...}")}})}return e.addEventListener("submit",c),{destroy(){e.removeEventListener("submit",c)}}}function ct(f){const t=f-1;return t*t*t+1}function lt(f,{delay:t=0,duration:a=400,easing:e=ct,start:c=0,opacity:v=0}={}){const _=getComputedStyle(f),s=+_.opacity,r=_.transform==="none"?"":_.transform,p=1-c,o=s*(1-v);return{delay:t,duration:a,easing:e,css:(g,b)=>`
			transform: ${r} scale(${1-p*b});
			opacity: ${s-o*b}
		`}}function At(f,{from:t,to:a},e={}){const c=getComputedStyle(f),v=c.transform==="none"?"":c.transform,[_,s]=c.transformOrigin.split(" ").map(parseFloat),r=t.left+t.width*_/a.width-(a.left+_),p=t.top+t.height*s/a.height-(a.top+s),{delay:o=0,duration:g=T=>Math.sqrt(T)*120,easing:b=ct}=e;return{delay:o,duration:K(g)?g(Math.sqrt(r*r+p*p)):g,easing:b,css:(T,h)=>{const w=h*r,I=h*p,i=T+h*t.width/a.width,l=T+h*t.height/a.height;return`transform: ${v} translate(${w}px, ${I}px) scale(${i}, ${l});`}}}function st(f,t,a){const e=f.slice();return e[5]=t[a],e[6]=t,e[7]=a,e}function rt(f,t){let a,e,c,v,_,s,r,p,o,g,b,T,h,w,I,i,l,u,D,F,B,A,C,H,Y,R,V,$,Z,q,z,G=Nt,O,J,tt;function et(...M){return t[3](t[5],t[6],t[7],...M)}function at(){return t[4](t[5],t[6],t[7])}return{key:f,first:null,c(){a=y("div"),e=y("form"),c=y("input"),_=N(),s=y("input"),p=N(),o=y("button"),T=N(),h=y("form"),w=y("input"),i=N(),l=y("input"),D=N(),F=y("button"),B=N(),A=y("form"),C=y("input"),Y=N(),R=y("button"),Z=N(),this.h()},l(M){a=E(M,"DIV",{class:!0});var m=P(a);e=E(m,"FORM",{action:!0,method:!0});var L=P(e);c=E(L,"INPUT",{type:!0,name:!0,class:!0}),_=U(L),s=E(L,"INPUT",{type:!0,name:!0,class:!0}),p=U(L),o=E(L,"BUTTON",{class:!0,"aria-label":!0}),P(o).forEach(k),L.forEach(k),T=U(m),h=E(m,"FORM",{class:!0,action:!0,method:!0});var j=P(h);w=E(j,"INPUT",{type:!0,name:!0,class:!0}),i=U(j),l=E(j,"INPUT",{"aria-label":!0,type:!0,name:!0,class:!0}),D=U(j),F=E(j,"BUTTON",{class:!0,"aria-label":!0}),P(F).forEach(k),j.forEach(k),B=U(m),A=E(m,"FORM",{action:!0,method:!0});var Q=P(A);C=E(Q,"INPUT",{type:!0,name:!0,class:!0}),Y=U(Q),R=E(Q,"BUTTON",{class:!0,"aria-label":!0}),P(R).forEach(k),Q.forEach(k),Z=U(m),m.forEach(k),this.h()},h(){n(c,"type","hidden"),n(c,"name","uid"),c.value=v=t[5].uid,n(c,"class","svelte-16nsat"),n(s,"type","hidden"),n(s,"name","done"),s.value=r=t[5].done?"":"true",n(s,"class","svelte-16nsat"),n(o,"class","toggle svelte-16nsat"),n(o,"aria-label",g="Mark todo as "+(t[5].done?"not done":"done")),n(e,"action","/todos?/toggle"),n(e,"method","post"),n(w,"type","hidden"),n(w,"name","uid"),w.value=I=t[5].uid,n(w,"class","svelte-16nsat"),n(l,"aria-label","Edit todo"),n(l,"type","text"),n(l,"name","text"),l.value=u=t[5].text,n(l,"class","svelte-16nsat"),n(F,"class","save svelte-16nsat"),n(F,"aria-label","Save todo"),n(h,"class","text svelte-16nsat"),n(h,"action","/todos?/edit"),n(h,"method","post"),n(C,"type","hidden"),n(C,"name","uid"),C.value=H=t[5].uid,n(C,"class","svelte-16nsat"),n(R,"class","delete svelte-16nsat"),n(R,"aria-label","Delete todo"),R.disabled=V=t[5].pending_delete,n(A,"action","/todos?/delete"),n(A,"method","post"),n(a,"class","todo svelte-16nsat"),nt(a,"done",t[5].done),this.first=a},m(M,m){x(M,a,m),d(a,e),d(e,c),d(e,_),d(e,s),d(e,p),d(e,o),d(a,T),d(a,h),d(h,w),d(h,i),d(h,l),d(h,D),d(h,F),d(a,B),d(a,A),d(A,C),d(A,Y),d(A,R),d(a,Z),O=!0,J||(tt=[W(b=X.call(null,e,et)),W(X.call(null,h)),W($=X.call(null,A,at))],J=!0)},p(M,m){t=M,(!O||m&1&&v!==(v=t[5].uid))&&(c.value=v),(!O||m&1&&r!==(r=t[5].done?"":"true"))&&(s.value=r),(!O||m&1&&g!==(g="Mark todo as "+(t[5].done?"not done":"done")))&&n(o,"aria-label",g),b&&K(b.update)&&m&1&&b.update.call(null,et),(!O||m&1&&I!==(I=t[5].uid))&&(w.value=I),(!O||m&1&&u!==(u=t[5].text)&&l.value!==u)&&(l.value=u),(!O||m&1&&H!==(H=t[5].uid))&&(C.value=H),(!O||m&1&&V!==(V=t[5].pending_delete))&&(R.disabled=V),$&&K($.update)&&m&1&&$.update.call(null,at),(!O||m&1)&&nt(a,"done",t[5].done)},r(){z=a.getBoundingClientRect()},f(){yt(a),G(),Et(a,z)},a(){G(),G=wt(a,z,At,{duration:200})},i(M){O||(M&&Tt(()=>{q||(q=ot(a,lt,{start:.7},!0)),q.run(1)}),O=!0)},o(M){M&&(q||(q=ot(a,lt,{start:.7},!1)),q.run(0)),O=!1},d(M){M&&k(a),M&&q&&q.end(),J=!1,kt(tt)}}}function Pt(f){let t,a,e,c,v,_,s,r,p,o=[],g=new Map,b,T,h,w=f[0];const I=i=>i[5].uid;for(let i=0;i<w.length;i+=1){let l=st(f,w,i),u=I(l);g.set(u,o[i]=rt(u,l))}return{c(){t=y("meta"),a=N(),e=y("section"),c=y("h1"),v=ht("Todos"),_=N(),s=y("form"),r=y("input"),p=N();for(let i=0;i<o.length;i+=1)o[i].c();this.h()},l(i){const l=pt('[data-svelte="svelte-aw2gey"]',document.head);t=E(l,"META",{name:!0,content:!0}),l.forEach(k),a=U(i),e=E(i,"SECTION",{class:!0});var u=P(e);c=E(u,"H1",{class:!0});var D=P(c);v=_t(D,"Todos"),D.forEach(k),_=U(u),s=E(u,"FORM",{class:!0,action:!0,method:!0});var F=P(s);r=E(F,"INPUT",{name:!0,"aria-label":!0,placeholder:!0,class:!0}),F.forEach(k),p=U(u);for(let B=0;B<o.length;B+=1)o[B].l(u);u.forEach(k),this.h()},h(){document.title="Todos",n(t,"name","description"),n(t,"content","A todo list app"),n(c,"class","text-5xl text-center"),n(r,"name","text"),n(r,"aria-label","Add todo"),n(r,"placeholder","+ tap to add a todo"),n(r,"class","svelte-16nsat"),n(s,"class","new svelte-16nsat"),n(s,"action","/todos?/add"),n(s,"method","post"),n(e,"class","todos pt-5 pb-3 px-4 svelte-16nsat")},m(i,l){d(document.head,t),x(i,a,l),x(i,e,l),d(e,c),d(c,v),d(e,_),d(e,s),d(s,r),d(e,p);for(let u=0;u<o.length;u+=1)o[u].m(e,null);b=!0,T||(h=W(X.call(null,s,f[1])),T=!0)},p(i,[l]){if(l&1){w=i[0],Mt();for(let u=0;u<o.length;u+=1)o[u].r();o=mt(o,l,I,1,i,w,g,e,Ot,rt,null,st);for(let u=0;u<o.length;u+=1)o[u].a();vt()}},i(i){if(!b){for(let l=0;l<w.length;l+=1)gt(o[l]);b=!0}},o(i){for(let l=0;l<o.length;l+=1)bt(o[l]);b=!1},d(i){k(t),i&&k(a),i&&k(e);for(let l=0;l<o.length;l+=1)o[l].d();T=!1,h()}}}function It(f,t,a){let e,{data:c}=t;const v=({form:r})=>({result:p})=>{p.type==="success"&&(r.reset(),it())},_=(r,p,o,{data:g})=>{a(0,p[o].done=!!g.get("done"),e)},s=(r,p,o)=>{a(0,p[o].pending_delete=!0,e)};return f.$$set=r=>{"data"in r&&a(2,c=r.data)},f.$$.update=()=>{f.$$.dirty&4&&a(0,e=c.todos)},[e,v,c,_,s]}class Ct extends ut{constructor(t){super(),dt(this,t,It,Pt,ft,{data:2})}}export{Ct as default};
